---
title: "ST558_Project 1"
authors: "Lamia Benyaine & Scott Van Slyck"
description: "Write functions to manipulate a process data sets"
date: "June 18, 2024"
format: html
editor: visual
---

# *Data Processing*

These are the libraries needed for this program.

```{r libraries}
library(readr)
library(dplyr)
library(tidyr)
library(lubridate)
```

Write a function that does steps 1 and 2 to select certain columns and convert the data into long format so area_name only has one enrollment value.

```{r}
ed <- read_csv("Data/EDU01a.csv")
```



```{r function for steps 1 & 2}
function_step_1_2 <- function(data, pivot = "enrollment") {
  return_1 <- 
    data |>
  as_tibble() |>
  rename(area_name = Area_name) |>
  select(area_name, STCOU, ends_with("D")) |>
  pivot_longer(cols = 3:12,
               names_to = "attribute", 
               values_to = pivot)
  return(return_1)
}
data_step_3 <- function_step_1_2(ed)

```

Write a function that takes in the previous function and converts the pivoted column into a year and a measurement column.

```{r function for step 3}
function_step_3 <- function(data) {
  data$year <-year(parse_date_time(substr(data$attribute, 8,9), "y"))
  data$measurement <-substr(data$attribute, 1,7)
}
function_step_3(data_step_3)
```

Step 4: Create two data sets: one for non-county and one for county level

```{r county data sets}
county_index <- grep(pattern = ", \\w\\w", data_step_3$area_name)

filter(is.na(match(county_index,data_step_3)))

data_step_3 |>
  select(county_index)
```

